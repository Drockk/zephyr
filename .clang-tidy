---
# clang-tidy configuration for Zephyr project
# Standard: C++23

Checks: >
  -*,
  bugprone-*,
  clang-analyzer-*,
  concurrency-*,
  cppcoreguidelines-*,
  modernize-*,
  performance-*,
  readability-*,
  misc-static-assert,
  misc-new-delete-overloads,
  misc-throw-by-value-catch-by-reference,
  misc-confusable-identifiers,
  misc-const-correctness,
  misc-coroutine-hostile-raii,
  misc-definitions-in-headers,
  misc-header-include-cycle,
  misc-include-cleaner,
  misc-misleading-bidirectional,
  misc-misleading-identifier,
  misc-misplaced-const,
  misc-non-copyable-objects,
  misc-non-private-member-variables-in-classes,
  misc-override-with-different-visibility,
  misc-predictable-rand,
  misc-redundant-expression,
  misc-unconventional-assign-operator,
  misc-uniqueptr-reset-release,
  misc-unused-alias-decls,
  misc-unused-parameters,
  misc-unused-using-decls,
  misc-use-anonymous-namespace,
  misc-use-internal-linkage,
  portability-simd-intrinsics,
  portability-std-allocator-const,
  portability-template-virtual-member-function,
  -modernize-use-trailing-return-type,
  -cppcoreguidelines-avoid-magic-numbers,
  -readability-magic-numbers,
  -cppcoreguidelines-pro-bounds-pointer-arithmetic,
  -cppcoreguidelines-pro-bounds-array-to-pointer-decay,
  -modernize-avoid-c-arrays,
  -cppcoreguidelines-avoid-c-arrays

WarningsAsErrors: ''
HeaderFilterRegex: '.*/(zephyr|examples)/.*\.hpp$'
FormatStyle: file

CheckOptions:
  # Naming conventions - variable prefixes
  - key: readability-identifier-naming.ParameterPrefix
    value: 't_'
  - key: readability-identifier-naming.ParameterCase
    value: 'lower_case'
  
  - key: readability-identifier-naming.ClassMemberPrefix
    value: 'm_'
  - key: readability-identifier-naming.ClassMemberCase
    value: 'camelBack'
  
  - key: readability-identifier-naming.PrivateMemberPrefix
    value: 'm_'
  - key: readability-identifier-naming.PrivateMemberCase
    value: 'camelBack'
  
  - key: readability-identifier-naming.ProtectedMemberPrefix
    value: 'm_'
  - key: readability-identifier-naming.ProtectedMemberCase
    value: 'camelBack'
  
  - key: readability-identifier-naming.PublicMemberPrefix
    value: 'm_'
  - key: readability-identifier-naming.PublicMemberCase
    value: 'camelBack'
  
  - key: readability-identifier-naming.StaticVariablePrefix
    value: 's_'
  - key: readability-identifier-naming.StaticVariableCase
    value: 'lower_case'
  
  # Struct fields - without m_ prefix
  - key: readability-identifier-naming.StructCase
    value: 'CamelCase'
  
  # Classes, types, functions
  - key: readability-identifier-naming.ClassCase
    value: 'CamelCase'
  - key: readability-identifier-naming.StructCase
    value: 'CamelCase'
  - key: readability-identifier-naming.EnumCase
    value: 'CamelCase'
  - key: readability-identifier-naming.FunctionCase
    value: 'camelBack'
  - key: readability-identifier-naming.MethodCase
    value: 'camelBack'
  - key: readability-identifier-naming.NamespaceCase
    value: 'lower_case'
  - key: readability-identifier-naming.TypeAliasCase
    value: 'CamelCase'
  - key: readability-identifier-naming.TypedefCase
    value: 'CamelCase'
  - key: readability-identifier-naming.TemplateParameterCase
    value: 'CamelCase'
  
  # Constants and enums
  # Local const variables: camelBack
  - key: readability-identifier-naming.ConstantCase
    value: 'camelBack'
  - key: readability-identifier-naming.EnumConstantCase
    value: UPPER_CASE
  - key: readability-identifier-naming.GlobalConstantCase
    value: UPPER_CASE
  - key: readability-identifier-naming.ConstexprVariableCase
    value: UPPER_CASE
  
  # Local and global variables
  - key: readability-identifier-naming.LocalVariableCase
    value: 'camelBack'
  - key: readability-identifier-naming.GlobalVariableCase
    value: 'lower_case'
  
  # Modernization
  - key: modernize-use-nullptr.NullMacros
    value: 'NULL'
  
  # Performance
  - key: performance-move-const-arg.CheckTriviallyCopyableMove
    value: true
  - key: performance-unnecessary-copy-initialization.AllowedTypes
    value: ''
  
  # Readability
  - key: readability-function-cognitive-complexity.Threshold
    value: 50
  - key: readability-function-size.LineThreshold
    value: 200
  - key: readability-function-size.StatementThreshold
    value: 150
  - key: readability-function-size.BranchThreshold
    value: 30
  - key: readability-function-size.ParameterThreshold
    value: 8
  - key: readability-simplify-boolean-expr.ChainedConditionalReturn
    value: true
  - key: readability-simplify-boolean-expr.ChainedConditionalAssignment
    value: true
  - key: readability-identifier-length.MinimumVariableNameLength
    value: 2
  - key: readability-identifier-length.MinimumParameterNameLength
    value: 2
  
  # C++ Core Guidelines
  - key: cppcoreguidelines-special-member-functions.AllowSoleDefaultDtor
    value: true
  - key: cppcoreguidelines-explicit-virtual-functions.IgnoreDestructors
    value: true
  
  # Bugprone
  - key: bugprone-argument-comment.StrictMode
    value: false
  - key: bugprone-assert-side-effect.AssertMacros
    value: 'assert,ASSERT'
  - key: bugprone-string-constructor.WarnOnLargeLength
    value: true
  - key: bugprone-string-constructor.LargeLengthThreshold
    value: 8388608
  
  # Misc
  - key: misc-const-correctness.AnalyzeValues
    value: true
  - key: misc-const-correctness.AnalyzeReferences
    value: true
  - key: misc-const-correctness.WarnPointersAsValues
    value: true
  - key: misc-const-correctness.TransformValues
    value: true
  - key: misc-const-correctness.TransformReferences
    value: true
  - key: misc-const-correctness.TransformPointersAsValues
    value: true
  - key: misc-unused-parameters.StrictMode
    value: false
